Верхнеуровневое описание системы:
-
![image](https://github.com/sweettpickle/AwesomeTaskExchangeSystem/assets/44313432/e265b238-4baf-45f9-918c-257d438ca26a)

комментарии:
1. у попугов есть роли, на уровне ролей имеется разгроничение прав доступов, соответственно где-то нужно хранить логику выдачи прав. Права в разреве кого? в разрезе попугов.
Хотелось бы как-то хранить инфо о попугах, ведь попуги будут создаваться, удаляться (улетать), изменяться и тд. Так родился сервис ParrotManager
2. Мы хотим создавать и назначать задачи на попугов. Должно быть место, где будут храниться задачи. Вместе с этим ему нужно знать минимальную инфо о существующих попугах в компании, чтобы как-то назначать на них задачи (в целом нужна только его роль и ид в родительской системе, но пусть и имя для красоты будет). Так родился сервис TaskManager
3. Куда-то нужно было скинуть всю оставшуюся сложную логику. Так родился сервис Accounting... Ну на самом деле не так конечно. Появилась какая-то отдельная логика для работы с счетами. И вот так 
4. Сейчас мы хотим отправлять только email о формировании отчета из сервиса Accounting, а потом еще захотим отправлять письмо о том, что на попуга назначена задача (из сервиса TaskManager). Дублировать логику не хотелось бы, да и при формировании письма будет единый интерфейс. Так родился сервис NotificationManager
5. Пусть каждый сервис хранит только то, что ему нужно (например taskManager тоже должен знать о правах, чтобы понимать, может ли вызывающий юзер заассайнить задачи)
6. Чтобы понять, отображать кнопочку икс или нет - идем в ParrotManager и запрашиваем права
7. Что делать если упадет сеть/бд/один из сервисов - главный попуг очень устал и хочет пойти спать, придется об этом подумать на курсе, спасибо за внимание!
8. спорных мест определенно много, но попуг слишком устал

ParrotManagement
-
- Отвечает за создание/удаление/изменение новых попугов, выдачу им прав, хранит их роль и тд

**Описание API:**
- POST Parrot - создание попуга
- PUT Parrot - изменение данных попуга
- DELETE Parrot - удаление попуга
- GET Permissions - возвращает права попуга
- POST GrantPermission - выдача прав
- POST RevokePermission - отмена разрешения

**Отправляемые события:**
- Выданы права (ParrotPublicId, Acl)
- Отозваны права (ParrotPublicId, Acl)
- Новый попуг (ParrotPublicId, Name)

**Схема БД:**
![image](https://github.com/sweettpickle/AwesomeTaskExchangeSystem/assets/44313432/12524f13-f009-4c08-899f-91d97cc246ff)


TaskManager
-
- Отвечает за создание/изменение задачи, за назначении задач на попугов

**Описание API:** 
- POST Task - создание задачи
- PUT Task - изменение задачи (можно изменить только название и описание)
- PUT ChangeStatus - изменение статуса задачи
- POST AssignTasks - заассайнить задачи на попугов

**Отправляемые события:**
- Задача выполнена (TaskPublicId, Price, ParrotPublicId)
- Задача назначена (TaskPublicId, Price, ParrotPublicId)

**Получаемые события:**
- Выдача прав попугу

**Схема БД:**
![image](https://github.com/sweettpickle/AwesomeTaskExchangeSystem/assets/44313432/e56eecce-508e-4f1c-8be7-197c30083645)


